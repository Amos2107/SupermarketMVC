<%- include('partials/header') %>
<%- include('partials/navbar') %>

<div class="container py-4">

  <h2 class="mb-4 text-center">Start Shopping</h2>

  <div class="row g-4">
    <% products.forEach(product => { %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">

        <div class="card h-100 shadow-sm product-card">

          <!-- Product Image -->
          <a href="/product/<%= product.id %>" class="text-center mt-3">
            <img 
              src="/images/<%= product.image %>" 
              class="card-img-top img-fluid"
              style="max-height: 160px; width: auto; object-fit: contain;"
              alt="<%= product.productName %>"
            />
          </a>

          <div class="card-body d-flex flex-column">

            <!-- Product Name -->
            <h5 class="card-title fw-semibold">
              <%= product.productName %>
            </h5>

            <!-- Price -->
            <p class="card-text fs-5 fw-bold text-primary mb-2">
              $<%= Number(product.price).toFixed(2) %>
            </p>

            <!-- Quantity Selector -->
            <div class="mb-3">
              <label class="form-label">Quantity</label>
              <select name="quantity" class="form-select" form="addToCartForm-<%= product.id %>">
                <% for (let q = 1; q <= 10; q++) { %>
                  <option value="<%= q %>"><%= q %></option>
                <% } %>
              </select>
            </div>

            <!-- Add to Cart -->
            <form 
              id="addToCartForm-<%= product.id %>" 
              action="/cart/add/<%= product.id %>" 
              method="POST" 
              class="mt-auto"
            >
              <button type="submit" class="btn btn-outline-primary w-100">
                ðŸ›’ Add to Cart
              </button>
            </form>

          </div>
        </div>

      </div>
    <% }) %>
  </div>

</div>

<style>
  .product-card {
    border-radius: 12px;
    transition: 0.25s ease;
  }
  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
  }
</style>

<%- include('partials/footer') %>
